<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>StockVision: 30-Day Market Forecast</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    :root {
      --primary-color: #ecf0f1;
      --secondary-color: #3498db;
      --accent-color: #e74c3c;
      --background-color: #1e272e;
      --card-background: #2c3e50;
      --text-color: #ecf0f1;
      --chart-background: #34495e;
    }

    body {
      font-family: 'Roboto', sans-serif;
      margin: 0;
      padding: 0;
      background-color: var(--background-color);
      color: var(--text-color);
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    h1,
    h2 {
      color: var(--primary-color);
      text-align: center;
    }

    h1 {
      font-size: 2.5em;
      margin-bottom: 40px;
    }

    h2 {
      font-size: 1.8em;
      margin-top: 40px;
    }

    .stock-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 30px;
      margin-bottom: 60px;
    }

    .stock-card {
      background-color: var(--card-background);
      border-radius: 12px;
      padding: 25px;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .stock-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
    }

    .stock-symbol {
      font-size: 28px;
      font-weight: bold;
      margin-bottom: 15px;
      color: var(--secondary-color);
    }

    .stock-price {
      font-size: 20px;
      margin-bottom: 10px;
    }

    .stock-prediction {
      font-size: 18px;
      color: var(--accent-color);
      font-weight: bold;
    }

    .candlestick-chart {
      width: 100%;
      height: 300px;
      margin-top: 20px;
    }

    nav {
      text-align: center;
      margin-bottom: 40px;
    }

    nav a {
      color: var(--secondary-color);
      text-decoration: none;
      font-weight: bold;
      font-size: 18px;
      transition: color 0.3s ease;
    }

    nav a:hover {
      color: var(--accent-color);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>About Our Stock Prediction Model</h1>
    <nav>
      <a href="{{ url_for('main.index') }}">Back to Home</a>
    </nav>

    <h2>Model Overview</h2>
    <p>
      Our stock prediction model uses machine learning to forecast stock prices 30 days out.
      It looks at past data, how the market is doing, and economic indicators to make predictions and help you make smart investment choices.
    </p>

    <h2>Key Features</h2>
    <ul>
      <li>Uses Random Forests and Gradient Boosting together</li>
      <li>Includes technical indicators like Moving Averages, RSI, and MACD</li>
      <li>Factors in economic stuff like interest rates, GDP growth, and inflation</li>
      <li>Analyzes news and social media to understand sentiment</li>
      <li>Keeps learning and getting better with new market data</li>
    </ul>

    <h2>Model Validation</h2>
    <p>
      We check our model carefully using stats and visuals to be sure it's reliable. Here's how it performs:
    </p>

    <div class="model-visual">
      <h3>Mean Squared Error (MSE) Over Time</h3>
      <div id="mseChart"></div>
    </div>
    <script>
      const mseData = {{ mse_over_time | tojson }};

      const chartData = [{
        x: mseData.map(entry => entry.stock),
        y: mseData.map(entry => entry.value),
        type: 'scatter',
        mode: 'lines+markers',
        line: {color: '#3498db'}
      }];

      const mseLayout = {
        title: 'Mean Squared Error Over Time',
        xaxis: {title: 'Stock'},
        yaxis: {title: 'MSE'},
        plot_bgcolor: 'rgba(0,0,0,0)',
        paper_bgcolor: 'rgba(0,0,0,0)',
        font: {color: '#ecf0f1'}
      };

      Plotly.newPlot('mseChart', chartData, mseLayout);
    </script>

    <div class="model-visual">
      <h3>R-squared Score for Different Stocks</h3>
      <div id="rSquaredChart"></div>
    </div>
    <script>
      const rSquaredData = {{ r_squared_scores | tojson }};

      const chartDataRSquared = [{
        x: rSquaredData.map(entry => entry.stock),
        y: rSquaredData.map(entry => entry.value),
        type: 'bar',
        marker: {color: '#e74c3c'}
      }];

      const rSquaredLayout = {
        title: 'R-squared Score for Different Stocks',
        xaxis: {title: 'Stock'},
        yaxis: {title: 'R-squared Score', range: [0, 1]},
        plot_bgcolor: 'rgba(0,0,0,0)',
        paper_bgcolor: 'rgba(0,0,0,0)',
        font: {color: '#ecf0f1'}
      };

      Plotly.newPlot('rSquaredChart', chartDataRSquared, rSquaredLayout);
    </script>

    <div class="model-visual">
      <h3>Feature Importance</h3>
      <div id="featureImportanceChart"></div>
    </div>
    <script>
      const featureImportanceData = {{ feature_importances | tojson }};

      const formattedData = [{
        y: featureImportanceData.map(entry => entry.feature),
        x: featureImportanceData.map(entry => entry.importance),
        type: 'bar',
        orientation: 'h',
        marker: {color: '#2ecc71'}
      }];

      const featureImportanceLayout = {
        title: 'Feature Importance',
        xaxis: {title: 'Importance Score'},
        yaxis: {title: 'Feature'},
        plot_bgcolor: 'rgba(0,0,0,0)',
        paper_bgcolor: 'rgba(0,0,0,0)',
        font: {color: '#ecf0f1'}
      };

      Plotly.newPlot('featureImportanceChart', formattedData, featureImportanceLayout);
    </script>

    <div class="model-visual">
      <h3>Predicted vs Actual Prices (AAPL - Last 30 Days)</h3>
      <div id="predictionVsActualChart"></div>
    </div>
    <script>
      const predictedVsActualData = {{ predicted_vs_actual | tojson }};

      const formattedPredictedVsActualData = [
        {
          x: predictedVsActualData.map(entry => entry.date),
          y: predictedVsActualData.map(entry => entry.predicted),
          type: 'scatter',
          mode: 'lines+markers',
          name: 'Predicted',
          line: {color: '#3498db'}
        },
        {
          x: predictedVsActualData.map(entry => entry.date),
          y: predictedVsActualData.map(entry => entry.actual),
          type: 'scatter',
          mode: 'lines+markers',
          name: 'Actual',
          line: {color: '#e74c3c'}
        }
      ];

      const predictionVsActualLayout = {
        title: 'Predicted vs Actual Prices (AAPL)',
        xaxis: {title: 'Date'},
        yaxis: {title: 'Price ($)'},
        plot_bgcolor: 'rgba(0,0,0,0)',
        paper_bgcolor: 'rgba(0,0,0,0)',
        font: {color: '#ecf0f1'}
      };

      Plotly.newPlot('predictionVsActualChart', formattedPredictedVsActualData, predictionVsActualLayout);
    </script>

    <h2>Limitations and Disclaimers</h2>
    <p>
      Remember, predicting the stock market is tough. Unexpected world events, policy changes, or company news can mess things up. Don't rely on this model alone; use it as one tool among many. Talk to a financial advisor before making any investment decisions. Past success doesn't guarantee future wins.
    </p>
  </div>
</body>
</html>